# ActiveJobって何？

## ✅ 行ったこと

- ActiveJobについて調べた

## ActiveJobとは

- Active Jobは、ジョブを宣言し、それによってバックエンドでさまざまな方法によるキュー操作を実行するためのフレームワークです。<br>
ジョブには、定期的なクリーンアップを始めとして、請求書発行やメール配信など、あらゆる処理がジョブになります。<br>
これらのジョブをより細かな作業単位に分割して並列実行することもできます。[1]

## Job（ジョブ）とQueue（キュー）とは

ActiveJobについて考える前に、頻繁に出てくるジョブとキューとは何かを理解するところから初めてみます。<br>

Job（ジョブ）：コンピュータがする仕事の単位<br>
Queue（キュー）：データ構造の一つ。待ち行列ともいう<br>

ジョブは現実世界で例えるなら、<br>

- 買い物にいく
- 料理をする
- 片付けをする

といったような、一つ一つのタスクのようなものです。<br>

（図はサイト参照）<br>

キューはタスクを登録するための入れ物とするとイメージしやすいかもしれません。<br>

（図はサイト参照）<br>

キューの特徴は 先に登録されたものから先に実行する(先入れ先出し)という点です。<br>

01：買い物にいく<br>
02：料理をする<br>
03：片付けをする<br>

このようなジョブを01から順番にキューに登録、実行した場合、01買い物にいく->02料理をする->03片付けをするの順で実行されます。<br>

そして、登録したJobから逐次実行する。というフローをジョブキューと呼ばれたりもします。<br>

（図はサイト参照）<br>

ActiveJobはこれらの処理をバックグラウンドで実行することができる機能のことをいいます。

## どのような場面で利用する？[2]

ActiveJobはバックグラウンドで実行ができるため、処理をアプリケーションの裏側で実行させることができます。<br>
なので、ActiveJobは基本的にリアルタイム性を伴わない場合や重たい処理に使われることが多いです。<br>
具体的には
- メールの送信
- 画像の処理
- データを集計してCSVに落とす

このような時間がかかる処理の場合には、先にレスポンスをクライアントへ返しておき、バックグラウンドで処理を別途実行します。

## つまり、ActiveJobとは

ActiveJobは、Railsのバックグラウンドジョブ処理のための仕組みです。<br>
メール送信や画像処理、APIリクエストなど、時間のかかる処理を非同期で実行できるのが特徴です。<br>
こうした処理をリクエスト・レスポンスの流れから切り離してバックグラウンドで動かすことで、アプリケーションの応答性を高めることができます。<br>
具体的には、ユーザー登録時のメール送信、大量のデータ処理、定期バッチ処理などの場面でよく使われます。

## バッチ処理とは

- バックグラウンドで定期的に実行される一連の処理を実行するための機能。[3]<br>
以下のような自動化されたタスクを実行できる
  - 定期的なデータ処理
  - データのインポート、エクスポート
  - レポート生成

- そもそも“バッチ”という言葉は英語の「Batch」が語源であり、日本語では「一束、一群、一団」といった意味があります。<br>
つまりバッチ処理とは“一定量の(あるいは一定期間の)データを集め、一括処理するための処理方法”です。[4]

## 参考サイト
[1](https://railsguides.jp/active_job_basics.html#:~:text=Active%20Job%E3%81%AF%E3%80%81%E3%83%90%E3%83%83%E3%82%AF%E3%82%B0%E3%83%A9%E3%82%A6%E3%83%B3%E3%83%89,%E3%82%A4%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%95%E3%82%A7%E3%82%A4%E3%82%B9%E3%82%92%E6%8F%90%E4%BE%9B%E3%81%97%E3%81%BE%E3%81%99%E3%80%82)<br>
[2](https://qiita.com/seiyatakahashi/items/cb9ae73e5ba3020f4a89)<br>
↑このサイトがわかりやすい<br>
[3](https://qiita.com/MK32A/items/fbba06445d3ea7c6db2e)<br>
[4](https://www.imkk.jp/blog/what-is-batch-processing.html)