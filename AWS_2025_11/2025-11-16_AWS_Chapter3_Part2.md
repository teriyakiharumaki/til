# S3バケットの作成

## ✅ 行ったこと

- S3バケットの作成を行なった

## 学んだこと（３章終わりまで）
- S3バケットの作成を行なった（東京リージョン）
  - バケット名（ドメイン名で作るので、メモ帳に保存）
- ACLは無効（他のAWSアカウントも所有者になれるかの設定）
- このバケットのブロックパブリックアクセス設定は、パブリックアクセスをブロックのチェックを外して誰でもアクセスできるようにする（webサーバーとして機能させる）
- パブリックアクセスはアカウントを持たない人からのアクセス
- バケットのバージョニングは無効にする
  - 上書きした時に前のバージョンを残すかの設定
    - 前のものがスタックしていき、その分の容量のコストがかかる
- デフォルトの暗号化はAmazon S3 マネージドキーを使用したサーバー側の暗号化にする
  - 今回のはAWSgaキーを設定するもの
  - もう一つの方はコストがかかるが、自分で設定できたり、暗号、復号の記録が残るので秘匿性の高いデータの時はこっちが良い

***

- 静的ウェブサイトホスティング機能を有効にして、S3バケットのwebサーバー機能をオンにする
- バケット名からのページの「プロパティ」から「静的ウェブサイトホスティング」の「編集」から設定した
  - index.html、error.htmlを設定

***

- バケットポリシーの設定を行い、誰でもwebからアクセスできるように設定した
- 匿名アクセスをできるようにするには、JSON形式のデータを構成しなければならない
  - 全ユーザーに読み取り権限を与えるポリシーはAWSのドキュメントが公開されている
  - このサイトからJSON形式のコードを参考にし、バケット名を自分のものに変更

***

- バケットにファイルをアップロードして表示されるように設定した
  - index.htmlをアップロード
  [![Image from Gyazo](https://i.gyazo.com/6799cb4ac7f3d8ddeb18291fb829d076.png)](https://gyazo.com/6799cb4ac7f3d8ddeb18291fb829d076)
  - index.htmlを500.png(PCにあった著作権のない画像)を読み取るように修正してアップロードしなおす
  [![Image from Gyazo](https://i.gyazo.com/13f7c5e376bc112b61426dc33ca86164.png)](https://gyazo.com/13f7c5e376bc112b61426dc33ca86164)

***

- S3Browserというソフトを使ってファイル操作する方法を学んだ
- 以前作ったIAMユーザーの「suzuki」にアクセスキーを登録
  - アクセスキーは取得時の画面が消えたら二度と表示されないのでしっかり保管しておく必要がある
  - 無くした場合は、無効にしてつくり直すしかない
- mac版には、「CyberDuck」がある
- S3の課金を防ぐには、ファイルの中身を消すか、バケットごと消すしかない
  - 「保存してる容量」と、「転送量」で決まる



## 参考文献
技術評論社　大澤文孝著『ゼロからわかる Amazon Web Services超入門 はじめてのクラウド 改訂新版』