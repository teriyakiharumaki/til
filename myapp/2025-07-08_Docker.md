# Dockerって何？

## ✅ 行ったこと

- Dockerについて調べた

## Dockerとは

- 1台のサーバー上で様々なアプリケーションを手軽に仮想化・実行できるようにするためのプラットフォームのこと。<br>
Dockerコンテナと呼ばれるアプリケーションの実行環境を、1台のサーバー上に作成することができる。<br>
Dockerコンテナを作成するための設計図であるDockerイメージを共有することで、他ユーザーでも簡単に同じ開発環境のDockerコンテナを使ってアプリケーションを実行できる。[1]←図がある

- Dockerはオープンソースのコンテナ技術です。コンテナは軽量で移植可能なソフトウェアのパッケージで、開発者がアプリケーションとその依存関係をシステムから切り離して、コードを一貫性を持って実行できるようにするものです。[2]

## 機能、用語[1]

- Dockerコンテナ

  システムの他の部分に影響を与えることなく、アプリケーションを実行できる仮想空間のような隔離された環境で、すべてのコードと依存関係がパッケージ化されている。

- Dockerイメージ

  アプリケーションの実行に必要なソースコード、依存関係、ツールを含んだパッケージで、コンテナ作成時に指示を出す読み取り専用のファイル。

- Dockerfile

  Dockerイメージを構成するテキストデータで、Dockerfileを読み込むことでDockerイメージが構築される。

- Docker Compose

  複数のコンテナを１度に操作することができるツール。Docker Composeの設定ファイルであるdocker-compose.ymlファイルは複数のコンテナ間の関係や環境変数などを記述する。

- Docker Desktop

  Windows・MacOS上でDocker環境を構築・利用するためのツールで、画面上でコンテナの停止や再開、廃止といった操作が可能。

- Docker Hub

  Dockerイメージの共有サービス。Dockerイメージ（Dockerfile）が公開されており、Docker Hubから任意のイメージ（Dockerfile）を取得できる。自身で作成したイメージ（Dockerfile）をリポジトリにアップし、他ユーザーと共有することも可能。

## メリット[2]

- 環境統一

  Dockerを使うと、開発者は自分のローカルマシンで動作するものと同じアプリケーションを他のマシンやサーバーでも動作させることができます。

- 依存関係の管理

  アプリケーションの依存関係をDockerfileという設定ファイルに記述することで、それぞれのアプリケーションが必要とするライブラリやツールを明確にすることができます。

- 隔離

  Dockerコンテナは互いに隔離されているため、アプリケーションがシステム全体に影響を与えることはありません。これにより、異なるアプリケーションやプロジェクト間での環境の競合を防ぐことができます。

## デメリット[3]

- デメリット1: 規模拡大時のオーバーヘッド

  Dockerは軽量なものの、大規模システムに拡大する場合だと、Docker管理自体でパフォーマンスや管理手間が大きくなる点には注意が必要です。<br>

  Dockerのコンテナ型アーキテクチャでは、1台のサーバ上で大量のコンテナを実行できる反面、その管理やオーケストレーションが必要になります。特に、数千規模以上の大規模利用では処理オーバーヘッドが顕在化します。<br>

  そのため、大量のコンテナを管理するプラットフォームとして、Kubernetesなどのオーケストレーションツールを利用するのが一般的です。この場合、コストや学習コストといった新たな課題が発生します。<br>

  大規模システムでは、ミドルウェアレイヤーの増大によりパフォーマンスが犠牲になる面もあるので、システム設計時には注意が必要です。状況に応じた最適なアーキテクチャを検討することが大切です。<br>

  ※オーケストレーション・・・大規模なコンピュータシステムを効率的に管理、運用することです。複数のサーバやストレージ、ネットワークを自動的に連携制御します。<br>

  ※処理オーバーヘッド・・・本来の処理に付随して発生する、余計な処理に相当する負荷のことです。応答速度の低下やスループットの低下を引き起こします。<br>
<br>

- デメリット2: セキュリティ面の脅威がある

  コンテナ型のアーキテクチャのため、1台のマシン上で多数のコンテナが動作することに起因する脆弱性には注意する必要があります。<br>

  Dockerは、OSレベルの仮想化を行う軽量なコンテナを実現していますが、その分複雑なセキュリティ管理が必要になります。例えば、複数コンテナがホストのリソースやカーネルを共有するため、1つの脆弱性がすべてに影響を及ぼす可能性があります。<br>

  コンテナ単位で適切な権限セットを行い、実行ユーザを最小限に抑えるなどの対策が必要です。また他コンテナから、ネットワーク隔離やファイアウォールの設定もセキュリティ上重要になってきます。どのような制限範囲まで許容するかといったセキュリティポリシーを、事前に設計することも大切な点です。<br>

  Docker導入から運用まで、一貫したセキュリティ対策の準備が必要で、大規模利用ほどその設計は困難になります。十分な検討と対策が欠かせません。<br>

  ※カーネル・・・オペレーティングシステム(OS)の中核となるソフトウェアのことです。OSの基本機能を提供し、ハードウェアを制御する役割を持ちます。<br>

  ※リソース・・・コンピュータシステムを動作させるために使用できるハードウェアやソフトウェアのことを指します。メモリ、CPU、ストレージなどの計算機資源のほか、電力、ネットワーク帯域なども含まれます。<br>
<br>

- デメリット3: クラウド依存の高まり

  Dockerでは、クラウド上の動作を前提としている場合が多く、クラウドリソースへの依存が強まるため、耐障害性が低下する点に注意が必要です。<br>

  Dockerは、コンテナをまとめて管理するツールとよく連携でき、クラウド上での運用を前提とした構成を目指していることが多いです。これにより、クラウドサービスへの依存度が高くなりがちです。<br>

  例えば、コンテナデータの保存先をクラウド上のストレージに置いている場合、クラウドサービスそのものに障害が発生するとサービス提供能力を失うことになります。<br>

  このため、プライベートクラウドやハイブリッドクラウド構成への対応、複数のクラウドをまたいだデータの複製など、障害リスクを分散する設計が欠かせません。アーキテクチャ全体としての、耐障害性確保が必要です。<br>

  ※コンテナオーケストレーションツール・・・大量のコンテナを管理・運用するためのソフトウェアです。コンテナのスケーリングやフェイルオーバー、ロードバランシングなどの制御を自動化します。代表例としてKubernetesなどがあります。<br>
<br>

- デメリット4: コンテナ間連携の難易度

  同一マシン上で動作するコンテナ同士を連携させる場合、設定の難易度は高く、うまく設計できないと運用面で困ることがあります。<br>

  例えば、WebアプリとDBを別コンテナで運用する場合、同一ホスト内での通信設定が必要です。ポートやソケットを開放する場合はセキュリティリスクがある一方、VPN接続のような複雑な設定を適用すると運用面で苦労します。<br>

  また、コンテナ間でファイルやデータを共有するには、追加の設定が必要で、設定する方法によってはコンテナの速度が遅くなるなど、処理性能が低下する場合もあります。<br>

  このように、低いレイヤーであるほどコンテナを連携させる難易度は高くなりがちです。アーキテクチャ設計時点から、コンテナ同士をどのようにつないでいくかをよく考えて、メリットとデメリットを比較検討することが大切です。<br>
<br>

- デメリット5: ログやデータの扱いに手間がかかる

  コンテナのログやデータは、外部ストレージに保存・管理するための手間と費用が大きくなるため、設計には注意が必要です。<br>

  Dockerのコンテナ上では、状態を保持する機能が制限的であるため、アプリケーションデータやログは外部ストレージに出力させることが一般的です。これには、Kubernetesなどの機能を利用して、複数のストレージをまとめた1つのストレージにデータを保存するという方法があります。<br>

  外部ストレージをストレージサービスとして運用する場合、サービス料金やバックアップ・複製の担保などデータ管理コストが重くなりがちです。<br>

  また複数のコンテナから大量ログが出力される場合、外部ストレージへの保存だけでなく、そのログの解析やデータの可視化する手法にもコストがかかります。<br>

## 参考サイト
[1](https://qiita.com/riku_ogawa/items/4ffc6aaf7a3df053a4ad)<br>
[2](https://qiita.com/TakanoriVega/items/7875426708bf9abe2175)<br>
[3](https://jitera.com/ja/insights/8236)<br>
